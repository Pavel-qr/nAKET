#:kivy 2.1.0

<WrapLabel@Label>:
    size_hint_y: None
    height: self.texture_size[1]  # the size needed to fit the text
    text_size: self.width, None
    halign: 'center'
    valign: 'middle'

<AbstractListItem>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: .1, .1, .1, 1
        Line:
            width: 2.4
            rectangle: self.x, self.y, self.width, self.height

    orientation: 'vertical'
    spacing: 10
    size_hint_y: None

<ToHomeButton@AnchorLayout>:
    anchor_x: 'left'
    anchor_y: 'bottom'
    MDIconButton:
        size_hint: None, 0.14
        width: self.height
        theme_text_color: 'Custom'
        text_color: rgba('#E91E63')
        icon: 'arrow-left-bold-outline'
        on_release: self.parent.parent.parent.current = 'home'

<WTasks>:
    canvas.before:
        Color:
            rgba: .5, .7, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        on_scroll_y: self.parent.check_update_scroll(self, tasks)

        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            size_hint_y: None
            height: self.minimum_height
            id: tasks

<WTask>:
    size_hint_y: None

    WrapLabel:
        id: teacher
        text: 'Teacher' * 15    # for long text tests
    WrapLabel:
        id: type
        text: 'Task type'
    WrapLabel:
        id: name
        text: 'Task name'


<WSchedule>:
    canvas.before:
        Color:
            rgba: .5, .7, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size

    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        on_scroll_y: self.parent.check_update_scroll(self, schedule)

        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            size_hint_y: None
            height: self.minimum_height
            id: schedule

<WLesson>:
    WrapLabel:
        id: time
        text: 'time'
    WrapLabel:
        id: name
        text: 'name'

<WMaterials>:
    canvas.before:
        Color:
            rgba: .5, .7, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size

    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        on_scroll_y: self.parent.check_update_scroll(self, materials)

        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            size_hint_y: None
            height: self.minimum_height
            id: materials

    ToHomeButton:

<WMaterial>:
    WrapLabel:
        id: name
        text: 'name'
    WrapLabel:
        id: url
        text: 'url'
        markup: True
        on_ref_press:
            import webbrowser
            webbrowser.open(args[1])
    WrapLabel:
        id: filelink
        text: 'filelink'
        markup: True
        on_ref_press:
            import webbrowser
            webbrowser.open(args[1])

<WSessions>:
    canvas.before:
        Color:
            rgba: .5, .7, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size

    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        on_scroll_y: self.parent.check_update_scroll(self, sessions)

        BoxLayout:
            orientation: 'vertical'
            spacing: 10
            size_hint_y: None
            height: self.minimum_height
            id: sessions

    ToHomeButton:

<WSession>:
    WrapLabel:
        id: date
        text: 'date'
    WrapLabel:
        id: shift
        text: 'первая смена'
    WrapLabel:
        id: name
        text: 'name'

<Naket>:
    Screen:
        name: 'home'

        MDSwiper:
            swipe_on_scroll: False
            items_spacing: 0

            WTasks:
            WSchedule:
            MDSwiperItem:
                BoxLayout:
                    orientation: 'vertical'
                    Button:
                        text: 'settings'
                        on_press: print('Not implemented')
                    Button:
                        text: 'materials'
                        on_press: root.current = 'materials'
                    Button:
                        text: 'sessions'
                        on_press: root.current = 'sessions'
                    Button:
                        text: 'google calendar'
                        on_press: print('Not implemented')
                    Button:
                        text: 'teachers'
                        on_press: print('Not implemented')

    WMaterials:
        name: 'materials'

    WSessions:
        name: 'sessions'