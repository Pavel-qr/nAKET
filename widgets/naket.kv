#:kivy 2.1.0

<WrapLabel@Label>:
    size_hint_y: None
    height: self.texture_size[1]  # the size needed to fit the text
    text_size: self.width, None
    halign: 'center'
    valign: 'middle'

<MyButton@Button>:

<AbstractListItem>:
    canvas.before:
        Color:
            rgba: 0, 0, 0, 1
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: .1, .1, .1, 1
        Line:
            width: 2.4
            rectangle: self.x, self.y, self.width, self.height

    adaptive_height: True
    minimum_height: dp(150)
    orientation: 'vertical'
    spacing: 10

<ToHomeButton@AnchorLayout>:
    anchor_x: 'left'
    anchor_y: 'bottom'
    MDIconButton:
        size_hint: None, 0.14
        width: self.height
        theme_text_color: 'Custom'
        text_color: rgba('#E91E63')
        icon: 'arrow-left-bold-outline'
        on_release: self.parent.parent.parent.current = 'home'

<WTasks>:
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        on_scroll_y: self.parent.check_update_scroll(self, tasks)

        MDBoxLayout:
            adaptive_height: True
            orientation: 'vertical'
            spacing: 10
            id: tasks

<WTask>:
    size_hint_y: None

    WrapLabel:
        id: teacher
        text: 'Teacher' * 15    # for long text tests
    WrapLabel:
        id: type
        text: 'Task type'
    WrapLabel:
        id: name
        text: 'Task name'

<WSchedule>:
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        on_scroll_y: self.parent.check_update_scroll(self, schedule)

        MDBoxLayout:
            adaptive_height: True
            orientation: 'vertical'
            spacing: 10
            id: schedule

<WLesson>:
    WrapLabel:
        id: time
        text: 'time'
    WrapLabel:
        id: name
        text: 'name'

<WMaterials>:
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        on_scroll_y: self.parent.check_update_scroll(self, materials)

        MDBoxLayout:
            adaptive_height: True
            orientation: 'vertical'
            spacing: 10
            id: materials

    ToHomeButton:

<WMaterial>:
    WrapLabel:
        id: name
        text: 'name'
    WrapLabel:
        id: url
        text: 'url'
        markup: True
        on_ref_press:
            import webbrowser
            webbrowser.open(args[1])
    WrapLabel:
        id: filelink
        text: 'filelink'
        markup: True
        on_ref_press:
            import webbrowser
            webbrowser.open(args[1])

<WSessions>:
    ScrollView:
        do_scroll_x: False
        do_scroll_y: True
        on_scroll_y: self.parent.check_update_scroll(self, sessions)

        MDBoxLayout:
            adaptive_height: True
            orientation: 'vertical'
            spacing: 10
            id: sessions

    ToHomeButton:

<WSession>:
    WrapLabel:
        id: date
        text: 'date'
    WrapLabel:
        id: shift
        text: 'первая смена'
    WrapLabel:
        id: name
        text: 'name'

<WTeachers>:
    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            title: 'filter'
            MDTextField:

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True

            MDBoxLayout:
                adaptive_height: True
                orientation: 'vertical'
                spacing: 10
                id: teachers

    ToHomeButton:

<WCalendarExport>:
    # Type here

    ToHomeButton:

<WSettings>:
    ScrollView:
        MDBoxLayout:
            orientation: 'vertical'
            adaptive_height: True
            padding: dp(48)
            spacing: dp(15)

            MDTextField:
                id: login
                hint_text: 'login'
                mode: 'rectangle'
                password: True

            MDTextField:
                id: password
                hint_text: 'password'
                mode: 'rectangle'
                password: True

            MDTextField:
                id: group
                hint_text: 'group number'
                mode: 'rectangle'
                password: True

    ToHomeButton:

<Naket>:
    Screen:
        name: 'home'

        MDSwiper:
            swipe_on_scroll: False
            items_spacing: 0

            WTasks:
                id: tasks
            WSchedule:
                id: schedule
            MDSwiperItem:
                MDBoxLayout:
                    orientation: 'vertical'

                    MyButton:
                        text: 'settings'
                        on_press: root.current = 'settings'
                    MyButton:
                        text: 'materials'
                        on_press: root.current = 'materials'
                    MyButton:
                        text: 'sessions'
                        on_press: root.current = 'sessions'
                    MyButton:
                        text: 'google calendar'
                        on_press: root.current = 'calendar_export'
                    MyButton:
                        text: 'teachers'
                        on_press: root.current = 'teachers'

    WMaterials:
        id: materials
        name: 'materials'

    WSessions:
        id: sessions
        name: 'sessions'

    WSettings:
        id: settings
        name: 'settings'

    WTeachers:
        id: teachers
        name: 'teachers'

    WCalendarExport:
        name: 'calendar_export'
